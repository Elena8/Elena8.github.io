!function(a){a.jScrollPaneCusel={active:[]},a.fn.jScrollPaneCusel=function(b){b=a.extend({},a.fn.jScrollPaneCusel.defaults,b);var c=function(){return!1};return this.each(function(){function d(){var a=(_-K)/b.animateStep;a>1||a<-1?R(K+a):(R(_),ba())}var e=a(this),f=this.parentNode.offsetWidth;e.css("overflow","hidden");var g=this;if(a(this).parent().is(".jScrollPaneContainer")){var h=b.maintainPosition?e.position().top:0,i=a(this).parent(),j=f,k=i.outerHeight(),l=k;a(">.jScrollPaneTrack, >.jScrollArrowUp, >.jScrollArrowDown",i).remove(),e.css({top:0})}else{var h=0;this.originalPadding=e.css("paddingTop")+" "+e.css("paddingRight")+" "+e.css("paddingBottom")+" "+e.css("paddingLeft"),this.originalSidePaddingTotal=(parseInt(e.css("paddingLeft"))||0)+(parseInt(e.css("paddingRight"))||0);var j=f,k=e.innerHeight(),l=k;if(e.wrap("<div class='jScrollPaneContainer'></div>").parent().css({height:k+"px",width:j+"px"}),!window.navigator.userProfile){var m=parseInt(a(this).parent().css("border-left-width"))+parseInt(a(this).parent().css("border-right-width"));j-=m,a(this).css("width",j+"px").parent().css("width",j+"px")}a(document).bind("emchange",function(a,c,d){e.jScrollPaneCusel(b)})}if(b.reinitialiseOnImageLoad){var n=a.data(g,"jScrollPaneImagesToLoad")||a("img",e),o=[];n.length&&n.each(function(c,d){a(this).bind("load",function(){a.inArray(c,o)==-1&&(o.push(d),n=a.grep(n,function(a,b){return a!=d}),a.data(g,"jScrollPaneImagesToLoad",n),b.reinitialiseOnImageLoad=!1,e.jScrollPaneCusel(b))}).each(function(a,b){(this.complete||void 0===this.complete)&&(this.src=this.src)})})}var p=this.originalSidePaddingTotal,q={height:"auto",width:j-b.scrollbarWidth-b.scrollbarMargin-p+"px"};b.scrollbarOnLeft?q.paddingLeft=b.scrollbarMargin+b.scrollbarWidth+"px":q.paddingRight=b.scrollbarMargin+"px",e.css(q);var r=e.outerHeight(),s=k/r;if(s<.99){var t=e.parent();t.append(a('<div class="jScrollPaneTrack"></div>').css({width:b.scrollbarWidth+"px"}).append(a('<div class="jScrollPaneDrag"></div>').css({width:b.scrollbarWidth+"px"}).append(a('<div class="jScrollPaneDragTop"></div>').css({width:b.scrollbarWidth+"px"}),a('<div class="jScrollPaneDragBottom"></div>').css({width:b.scrollbarWidth+"px"}))));var u=a(">.jScrollPaneTrack",t),v=a(">.jScrollPaneTrack .jScrollPaneDrag",t);if(b.showArrows){var w,x,y,z,A=function(){(z>4||z%4==0)&&R(K+x*I),z++},B=function(b){a("html").unbind("mouseup",B),w.removeClass("jScrollActiveArrowButton"),clearInterval(y)},C=function(){a("html").bind("mouseup",B),w.addClass("jScrollActiveArrowButton"),z=0,A(),y=setInterval(A,100)};t.append(a("<div></div>").attr({class:"jScrollArrowUp"}).css({width:b.scrollbarWidth+"px"}).bind("mousedown",function(){return w=a(this),x=-1,C(),this.blur(),!1}).bind("click",c),a("<div></div>").attr({class:"jScrollArrowDown"}).css({width:b.scrollbarWidth+"px"}).bind("mousedown",function(){return w=a(this),x=1,C(),this.blur(),!1}).bind("click",c));var D=a(">.jScrollArrowUp",t),E=a(">.jScrollArrowDown",t);if(b.arrowSize)l=k-b.arrowSize-b.arrowSize,u.css({height:l+"px",top:b.arrowSize+"px"});else{var F=D.height();b.arrowSize=F,l=k-F-E.height(),u.css({height:l+"px",top:F+"px"})}}var G,H,I,J=a(this).css({position:"absolute",overflow:"visible"}),K=0,L=s*k/2,M=function(a,b){var c="X"==b?"Left":"Top";return a["page"+b]||a["client"+b]+(document.documentElement["scroll"+c]||document.body["scroll"+c])||0},N=function(){return!1},O=function(){ba(),G=v.offset(!1),G.top-=K,H=l-v[0].offsetHeight,I=2*b.wheelSpeed*H/r},P=function(b){return O(),L=M(b,"Y")-K-G.top,a("html").bind("mouseup",Q).bind("mousemove",S),a.browser.msie&&a("html").bind("dragstart",N).bind("selectstart",N),!1},Q=function(){a("html").unbind("mouseup",Q).unbind("mousemove",S),L=s*k/2,a.browser.msie&&a("html").unbind("dragstart",N).unbind("selectstart",N)},R=function(a){a=a<0?0:a>H?H:a,K=a,v.css({top:a+"px"});var c=a/H;J.css({top:(k-r)*c+"px"}),e.trigger("scroll"),b.showArrows&&(D[0==a?"addClass":"removeClass"]("disabled"),E[a==H?"addClass":"removeClass"]("disabled"))},S=function(a){R(M(a,"Y")-G.top-L)},T=Math.max(Math.min(s*(k-2*b.arrowSize),b.dragMaxHeight),b.dragMinHeight);v.css({height:T+"px"}).bind("mousedown",P);var U,V,W,X=function(){(V>8||V%4==0)&&R(K-(K-W)/2),V++},Y=function(){clearInterval(U),a("html").unbind("mouseup",Y).unbind("mousemove",Z)},Z=function(a){W=M(a,"Y")-G.top-L},$=function(b){O(),Z(b),V=0,a("html").bind("mouseup",Y).bind("mousemove",Z),U=setInterval(X,100),X()};u.bind("mousedown",$),t.bind("mousewheel",function(a,b){O(),ba();R(K-b*I);return!1});var _,aa,ba=function(){aa&&(clearInterval(aa),delete _)},ca=function(c,f){if("string"==typeof c){if($e=a(c,e),!$e.length)return;c=$e.offset().top-e.offset().top}t.scrollTop(0),ba();var g=-c/(k-r)*H;f||!b.animateTo?R(g):(_=g,aa=setInterval(d,b.animateInterval))};e[0].scrollTo=ca,e[0].scrollBy=function(a){var b=-parseInt(J.css("top"))||0;ca(b+a)},O(),ca(-h,!0),a("*",this).bind("focus",function(c){for(var d=a(this),f=0;d[0]!=e[0];)f+=d.position().top,d=d.offsetParent();var g=-parseInt(J.css("top"))||0,h=g+k,i=f>g&&f<h;if(!i){var j=f-b.scrollbarMargin;f>g&&(j+=a(this).height()+15+b.scrollbarMargin-k),ca(j)}}),location.hash&&ca(location.hash),a(document).bind("click",function(b){if($target=a(b.target),$target.is("a")){var c=$target.attr("href");"#"==c.substr(0,1)&&ca(c)}}),a.jScrollPaneCusel.active.push(e[0])}else e.css({height:k+"px",width:j-this.originalSidePaddingTotal+"px",padding:this.originalPadding}),e.parent().unbind("mousewheel")})},a.fn.jScrollPaneRemoveCusel=function(){a(this).each(function(){$this=a(this);var b=$this.parent();b.is(".jScrollPaneContainer")&&($this.css({top:"",height:"",width:"",padding:"",overflow:"",position:""}),$this.attr("style",$this.data("originalStyleTag")),b.after($this).remove())})},a.fn.jScrollPaneCusel.defaults={scrollbarWidth:10,scrollbarMargin:5,wheelSpeed:18,showArrows:!1,arrowSize:0,animateTo:!1,dragMinHeight:1,dragMaxHeight:99999,animateInterval:100,animateStep:3,maintainPosition:!0,scrollbarOnLeft:!1,reinitialiseOnImageLoad:!1},a(window).bind("unload",function(){for(var b=a.jScrollPaneCusel.active,c=0;c<b.length;c++)b[c].scrollTo=b[c].scrollBy=null})}(jQuery);