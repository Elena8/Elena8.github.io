function cuSel(a){function b(){jQuery("html").unbind("click"),jQuery("html").click(function(a){var b=jQuery(a.target),c=(b.attr("id"),b.prop("class"));if(c.indexOf("cuselText")==-1&&c.indexOf("cuselFrameRight")==-1||b.parent().prop("class").indexOf("classDisCusel")!=-1)if(c.indexOf("cusel")!=-1&&c.indexOf("classDisCusel")==-1&&b.is("div")){var d=b.find(".cusel-scroll-wrap").eq(0);cuselShowList(d)}else if(b.is(".cusel-scroll-wrap span")&&c.indexOf("cuselActive")==-1){var e;e=void 0==b.attr("val")?b.text():b.attr("val"),b.parents(".cusel-scroll-wrap").find(".cuselActive").eq(0).removeClass("cuselActive").end().parents(".cusel-scroll-wrap").next().val(e).end().prev().text(b.text()).end().css("display","none").parent(".cusel").removeClass("cuselOpen"),b.addClass("cuselActive"),b.parents(".cusel-scroll-wrap").find(".cuselOptHover").removeClass("cuselOptHover"),c.indexOf("cuselActive")==-1&&b.parents(".cusel").find(".cusel-scroll-wrap").eq(0).next("input").change()}else{if(b.parents(".cusel-scroll-wrap").is("div"))return;jQuery(".cusel-scroll-wrap").css("display","none").parent(".cusel").removeClass("cuselOpen")}else{var d=b.parent().find(".cusel-scroll-wrap").eq(0);cuselShowList(d)}}),jQuery(".cusel").unbind("keydown"),jQuery(".cusel").keydown(function(a){var b;if(window.event?b=window.event.keyCode:a&&(b=a.which),null==b||0==b||9==b)return!0;if(jQuery(this).prop("class").indexOf("classDisCusel")!=-1)return!1;if(40==b){var c=jQuery(this).find(".cuselOptHover").eq(0);if(c.is("span"))var d=c;else var d=jQuery(this).find(".cuselActive").eq(0);var e=d.next();return!!e.is("span")&&(jQuery(this).find(".cuselText").eq(0).text(e.text()),d.removeClass("cuselOptHover"),e.addClass("cuselOptHover"),$(this).find("input").eq(0).val(e.attr("val")),cuselScrollToCurent($(this).find(".cusel-scroll-wrap").eq(0)),!1)}if(38==b){var c=$(this).find(".cuselOptHover").eq(0);if(c.is("span"))var d=c;else var d=$(this).find(".cuselActive").eq(0);return cuselActivePrev=d.prev(),!!cuselActivePrev.is("span")&&($(this).find(".cuselText").eq(0).text(cuselActivePrev.text()),d.removeClass("cuselOptHover"),cuselActivePrev.addClass("cuselOptHover"),$(this).find("input").eq(0).val(cuselActivePrev.attr("val")),cuselScrollToCurent($(this).find(".cusel-scroll-wrap").eq(0)),!1)}if(27==b){var f=$(this).find(".cuselActive").eq(0).text();$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find(".cuselText").eq(0).text(f)}if(13==b){var g=$(this).find(".cuselOptHover").eq(0);if(g.is("span"))$(this).find(".cuselActive").removeClass("cuselActive"),g.addClass("cuselActive");else{$(this).find(".cuselActive").attr("val")}$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find("input").eq(0).change()}if(32==b&&$.browser.opera){var h=$(this).find(".cusel-scroll-wrap").eq(0);cuselShowList(h)}return!$.browser.opera&&void 0});var a=[];jQuery(".cusel").keypress(function(b){function c(){var b=[];for(var c in a)window.event?b[c]=a[c].keyCode:a[c]&&(b[c]=a[c].which),b[c]=String.fromCharCode(b[c]).toUpperCase();var d,f,g=jQuery(e).find("span"),h=g.length;for(d=0;d<h;d++){var i=!0;for(var j in a)f=g.eq(d).text().charAt(j).toUpperCase(),f!=b[j]&&(i=!1);if(i){jQuery(e).find(".cuselOptHover").removeClass("cuselOptHover").end().find("span").eq(d).addClass("cuselOptHover").end().end().find(".cuselText").eq(0).text(g.eq(d).text()),cuselScrollToCurent($(e).find(".cusel-scroll-wrap").eq(0)),a=a.splice,a=[];break}}a=a.splice,a=[]}var d;if(window.event?d=window.event.keyCode:b&&(d=b.which),null==d||0==d||9==d)return!0;if(jQuery(this).prop("class").indexOf("classDisCusel")!=-1)return!1;var e=this;a.push(b),clearTimeout(jQuery.data(this,"timer"));var f=setTimeout(function(){c()},500);return jQuery(this).data("timer",f),(!jQuery.browser.opera||9==window.event.keyCode)&&void 0})}jQuery(a.changedEl).each(function(c){var d=jQuery(this),e=d.outerWidth(),f=d.prop("class"),g=d.prop("id"),h=d.prop("name"),j=d.val(),k=d.find("option[value='"+j+"']").eq(0),l=k.text(),m=d.prop("disabled"),n=a.scrollArrows,o=d.prop("onchange"),p=d.prop("tabindex"),q=d.prop("multiple");if(!g||q)return!1;m?(classDisCuselText="classDisCuselLabel",classDisCusel="classDisCusel"):(classDisCuselText="",classDisCusel=""),n&&(classDisCusel+=" cuselScrollArrows"),k.addClass("cuselActive");var r=d.html(),s=r.replace(/option/gi,"span").replace(/value=/gi,"val=");if($.browser.msie&&parseInt($.browser.version)<9){var t=/(val=)(.*?)(>)/g;s=s.replace(t,"$1'$2'$3")}var u='<div class="cusel '+f+" "+classDisCusel+'" id=cuselFrame-'+g+' style="width:'+e+'px" tabindex="'+p+'"><div class="cuselFrameRight"></div><div class="cuselText">'+l+'</div><div class="cusel-scroll-wrap"><div class="cusel-scroll-pane" id="cusel-scroll-'+g+'">'+s+'</div></div><input type="hidden" id="'+g+'" name="'+h+'" value="'+j+'" /></div>';d.replaceWith(u),o&&jQuery("#"+g).bind("change",o);var v,w=jQuery("#cuselFrame-"+g),x=w.find("span");x.eq(0).text()?v=x.eq(0).innerHeight():(v=x.eq(1).innerHeight(),x.eq(0).css("height",x.eq(1).height())),x.length>a.visRows?w.find(".cusel-scroll-wrap").eq(0).css({height:v*a.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",v*a.visRows+"px"):w.find(".cusel-scroll-wrap").eq(0).css({display:"none",visibility:"visible"});var y=jQuery("#cusel-scroll-"+g).find("span[addTags]"),z=y.length;for(i=0;i<z;i++)y.eq(i).append(y.eq(i).attr("addTags")).removeAttr("addTags");b()}),jQuery(".cusel").focus(function(){jQuery(this).addClass("cuselFocus")}),jQuery(".cusel").blur(function(){jQuery(this).removeClass("cuselFocus")}),jQuery(".cusel").hover(function(){jQuery(this).addClass("cuselFocus")},function(){jQuery(this).removeClass("cuselFocus")})}function cuSelRefresh(a){var b,c=a.refreshEl.split(","),d=c.length;for(b=0;b<d;b++){var e=jQuery(c[b]).parents(".cusel").find(".cusel-scroll-wrap").eq(0);e.find(".cusel-scroll-pane").jScrollPaneRemoveCusel(),e.css({visibility:"hidden",display:"block"});var f=e.find("span"),g=f.eq(0).outerHeight();f.length>a.visRows?e.css({height:g*a.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",g*a.visRows+"px"):e.css({display:"none",visibility:"visible"})}}function cuselShowList(a){var b=a.parent(".cusel");if("none"==a.css("display")){$(".cusel-scroll-wrap").css("display","none"),b.addClass("cuselOpen"),a.css("display","block");var c=!1;b.prop("class").indexOf("cuselScrollArrows")!=-1&&(c=!0),a.find(".jScrollPaneContainer").eq(0).is("div")||a.find("div").eq(0).jScrollPaneCusel({showArrows:c}),cuselScrollToCurent(a)}else a.css("display","none"),b.removeClass("cuselOpen")}function cuselScrollToCurent(a){var b=null;if(a.find(".cuselOptHover").eq(0).is("span")?b=a.find(".cuselOptHover").eq(0):a.find(".cuselActive").eq(0).is("span")&&(b=a.find(".cuselActive").eq(0)),a.find(".jScrollPaneTrack").eq(0).is("div")&&b){var c=b.position(),d=a.find(".cusel-scroll-pane").eq(0).attr("id");jQuery("#"+d)[0].scrollTo(c.top)}}