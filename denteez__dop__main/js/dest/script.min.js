function cuSel(a){function b(){jQuery("html").unbind("click"),jQuery("html").click(function(a){var b=jQuery(a.target),c=(b.attr("id"),b.prop("class"));if(c.indexOf("cuselText")==-1&&c.indexOf("cuselFrameRight")==-1||b.parent().prop("class").indexOf("classDisCusel")!=-1)if(c.indexOf("cusel")!=-1&&c.indexOf("classDisCusel")==-1&&b.is("div")){var d=b.find(".cusel-scroll-wrap").eq(0);cuselShowList(d)}else if(b.is(".cusel-scroll-wrap span")&&c.indexOf("cuselActive")==-1){var e;e=void 0==b.attr("val")?b.text():b.attr("val"),b.parents(".cusel-scroll-wrap").find(".cuselActive").eq(0).removeClass("cuselActive").end().parents(".cusel-scroll-wrap").next().val(e).end().prev().text(b.text()).end().css("display","none").parent(".cusel").removeClass("cuselOpen"),b.addClass("cuselActive"),b.parents(".cusel-scroll-wrap").find(".cuselOptHover").removeClass("cuselOptHover"),c.indexOf("cuselActive")==-1&&b.parents(".cusel").find(".cusel-scroll-wrap").eq(0).next("input").change()}else{if(b.parents(".cusel-scroll-wrap").is("div"))return;jQuery(".cusel-scroll-wrap").css("display","none").parent(".cusel").removeClass("cuselOpen")}else{var d=b.parent().find(".cusel-scroll-wrap").eq(0);cuselShowList(d)}}),jQuery(".cusel").unbind("keydown"),jQuery(".cusel").keydown(function(a){var b;if(window.event?b=window.event.keyCode:a&&(b=a.which),null==b||0==b||9==b)return!0;if(jQuery(this).prop("class").indexOf("classDisCusel")!=-1)return!1;if(40==b){var c=jQuery(this).find(".cuselOptHover").eq(0);if(c.is("span"))var d=c;else var d=jQuery(this).find(".cuselActive").eq(0);var e=d.next();return!!e.is("span")&&(jQuery(this).find(".cuselText").eq(0).text(e.text()),d.removeClass("cuselOptHover"),e.addClass("cuselOptHover"),$(this).find("input").eq(0).val(e.attr("val")),cuselScrollToCurent($(this).find(".cusel-scroll-wrap").eq(0)),!1)}if(38==b){var c=$(this).find(".cuselOptHover").eq(0);if(c.is("span"))var d=c;else var d=$(this).find(".cuselActive").eq(0);return cuselActivePrev=d.prev(),!!cuselActivePrev.is("span")&&($(this).find(".cuselText").eq(0).text(cuselActivePrev.text()),d.removeClass("cuselOptHover"),cuselActivePrev.addClass("cuselOptHover"),$(this).find("input").eq(0).val(cuselActivePrev.attr("val")),cuselScrollToCurent($(this).find(".cusel-scroll-wrap").eq(0)),!1)}if(27==b){var f=$(this).find(".cuselActive").eq(0).text();$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find(".cuselText").eq(0).text(f)}if(13==b){var g=$(this).find(".cuselOptHover").eq(0);if(g.is("span"))$(this).find(".cuselActive").removeClass("cuselActive"),g.addClass("cuselActive");else{$(this).find(".cuselActive").attr("val")}$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find("input").eq(0).change()}if(32==b&&$.browser.opera){var h=$(this).find(".cusel-scroll-wrap").eq(0);cuselShowList(h)}return!$.browser.opera&&void 0});var a=[];jQuery(".cusel").keypress(function(b){function c(){var b=[];for(var c in a)window.event?b[c]=a[c].keyCode:a[c]&&(b[c]=a[c].which),b[c]=String.fromCharCode(b[c]).toUpperCase();var d,f,g=jQuery(e).find("span"),h=g.length;for(d=0;d<h;d++){var i=!0;for(var j in a)f=g.eq(d).text().charAt(j).toUpperCase(),f!=b[j]&&(i=!1);if(i){jQuery(e).find(".cuselOptHover").removeClass("cuselOptHover").end().find("span").eq(d).addClass("cuselOptHover").end().end().find(".cuselText").eq(0).text(g.eq(d).text()),cuselScrollToCurent($(e).find(".cusel-scroll-wrap").eq(0)),a=a.splice,a=[];break}}a=a.splice,a=[]}var d;if(window.event?d=window.event.keyCode:b&&(d=b.which),null==d||0==d||9==d)return!0;if(jQuery(this).prop("class").indexOf("classDisCusel")!=-1)return!1;var e=this;a.push(b),clearTimeout(jQuery.data(this,"timer"));var f=setTimeout(function(){c()},500);return jQuery(this).data("timer",f),(!jQuery.browser.opera||9==window.event.keyCode)&&void 0})}jQuery(a.changedEl).each(function(c){var d=jQuery(this),e=d.outerWidth(),f=d.prop("class"),g=d.prop("id"),h=d.prop("name"),j=d.val(),k=d.find("option[value='"+j+"']").eq(0),l=k.text(),m=d.prop("disabled"),n=a.scrollArrows,o=d.prop("onchange"),p=d.prop("tabindex"),q=d.prop("multiple");if(!g||q)return!1;m?(classDisCuselText="classDisCuselLabel",classDisCusel="classDisCusel"):(classDisCuselText="",classDisCusel=""),n&&(classDisCusel+=" cuselScrollArrows"),k.addClass("cuselActive");var r=d.html(),s=r.replace(/option/gi,"span").replace(/value=/gi,"val=");if($.browser.msie&&parseInt($.browser.version)<9){var t=/(val=)(.*?)(>)/g;s=s.replace(t,"$1'$2'$3")}var u='<div class="cusel '+f+" "+classDisCusel+'" id=cuselFrame-'+g+' style="width:'+e+'px" tabindex="'+p+'"><div class="cuselFrameRight"></div><div class="cuselText">'+l+'</div><div class="cusel-scroll-wrap"><div class="cusel-scroll-pane" id="cusel-scroll-'+g+'">'+s+'</div></div><input type="hidden" id="'+g+'" name="'+h+'" value="'+j+'" /></div>';d.replaceWith(u),o&&jQuery("#"+g).bind("change",o);var v,w=jQuery("#cuselFrame-"+g),x=w.find("span");x.eq(0).text()?v=x.eq(0).innerHeight():(v=x.eq(1).innerHeight(),x.eq(0).css("height",x.eq(1).height())),x.length>a.visRows?w.find(".cusel-scroll-wrap").eq(0).css({height:v*a.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",v*a.visRows+"px"):w.find(".cusel-scroll-wrap").eq(0).css({display:"none",visibility:"visible"});var y=jQuery("#cusel-scroll-"+g).find("span[addTags]"),z=y.length;for(i=0;i<z;i++)y.eq(i).append(y.eq(i).attr("addTags")).removeAttr("addTags");b()}),jQuery(".cusel").focus(function(){jQuery(this).addClass("cuselFocus")}),jQuery(".cusel").blur(function(){jQuery(this).removeClass("cuselFocus")}),jQuery(".cusel").hover(function(){jQuery(this).addClass("cuselFocus")},function(){jQuery(this).removeClass("cuselFocus")})}function cuSelRefresh(a){var b,c=a.refreshEl.split(","),d=c.length;for(b=0;b<d;b++){var e=jQuery(c[b]).parents(".cusel").find(".cusel-scroll-wrap").eq(0);e.find(".cusel-scroll-pane").jScrollPaneRemoveCusel(),e.css({visibility:"hidden",display:"block"});var f=e.find("span"),g=f.eq(0).outerHeight();f.length>a.visRows?e.css({height:g*a.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",g*a.visRows+"px"):e.css({display:"none",visibility:"visible"})}}function cuselShowList(a){var b=a.parent(".cusel");if("none"==a.css("display")){$(".cusel-scroll-wrap").css("display","none"),b.addClass("cuselOpen"),a.css("display","block");var c=!1;b.prop("class").indexOf("cuselScrollArrows")!=-1&&(c=!0),a.find(".jScrollPaneContainer").eq(0).is("div")||a.find("div").eq(0).jScrollPaneCusel({showArrows:c}),cuselScrollToCurent(a)}else a.css("display","none"),b.removeClass("cuselOpen")}function cuselScrollToCurent(a){var b=null;if(a.find(".cuselOptHover").eq(0).is("span")?b=a.find(".cuselOptHover").eq(0):a.find(".cuselActive").eq(0).is("span")&&(b=a.find(".cuselActive").eq(0)),a.find(".jScrollPaneTrack").eq(0).is("div")&&b){var c=b.position(),d=a.find(".cusel-scroll-pane").eq(0).attr("id");jQuery("#"+d)[0].scrollTo(c.top)}}$(function(){"use strict";function a(a){var b,c,d,e=a.target.files;c=e[0],$(".errors").html('<p id="errors__img"></p>'),/image.*/.test(c.type)?(d=[c.name,c.type,c.size],$("#errors__img").html("<p></p>"),c.size<4e6?($("#errors__img").html("<p></p>"),b=new FileReader,b.readAsDataURL(c),b.onload=function(a,b){return function(a){var b=new Image;b.src=a.target.result,b.complete&&(b.height>300||b.width>300?($("#errors__img").html("<p></p>"),$(".img__upload").append('<span class="img__wrap"><img class="thumb" src="'+a.target.result+'"></span>'),$("#add-id").css({display:"none"})):$("#errors__img").html("<p>image little</p>"))}}(c,d)):$("#errors__img").html("<p>image >5MB</p>")):$("#errors__img").html("<p>Not image file</p>")}window.File&&window.FileReader&&window.FileList&&window.Blob?onload=function(){$(".input__file").get(0).addEventListener("change",a,!1)}:alert("К сожалению ваш браузер не поддерживает file API")}),function(a){a.event.special.mousewheel={setup:function(){var b=a.event.special.mousewheel.handler;a.browser.mozilla&&a(this).bind("mousemove.mousewheel",function(b){a.data(this,"mwcursorposdata",{pageX:b.pageX,pageY:b.pageY,clientX:b.clientX,clientY:b.clientY})}),this.addEventListener?this.addEventListener(a.browser.mozilla?"DOMMouseScroll":"mousewheel",b,!1):this.onmousewheel=b},teardown:function(){var b=a.event.special.mousewheel.handler;a(this).unbind("mousemove.mousewheel"),this.removeEventListener?this.removeEventListener(a.browser.mozilla?"DOMMouseScroll":"mousewheel",b,!1):this.onmousewheel=function(){},a.removeData(this,"mwcursorposdata")},handler:function(b){var c=Array.prototype.slice.call(arguments,1);b=a.event.fix(b||window.event),a.extend(b,a.data(this,"mwcursorposdata")||{});var d=0;return b.wheelDelta&&(d=b.wheelDelta/120),b.detail&&(d=-b.detail/3),b.data=b.data||{},b.type="mousewheel",c.unshift(d),c.unshift(b),a.event.handle.apply(this,c)}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery),function(a){a.jScrollPaneCusel={active:[]},a.fn.jScrollPaneCusel=function(b){b=a.extend({},a.fn.jScrollPaneCusel.defaults,b);var c=function(){return!1};return this.each(function(){function d(){var a=(_-K)/b.animateStep;a>1||a<-1?R(K+a):(R(_),ba())}var e=a(this),f=this.parentNode.offsetWidth;e.css("overflow","hidden");var g=this;if(a(this).parent().is(".jScrollPaneContainer")){var h=b.maintainPosition?e.position().top:0,i=a(this).parent(),j=f,k=i.outerHeight(),l=k;a(">.jScrollPaneTrack, >.jScrollArrowUp, >.jScrollArrowDown",i).remove(),e.css({top:0})}else{var h=0;this.originalPadding=e.css("paddingTop")+" "+e.css("paddingRight")+" "+e.css("paddingBottom")+" "+e.css("paddingLeft"),this.originalSidePaddingTotal=(parseInt(e.css("paddingLeft"))||0)+(parseInt(e.css("paddingRight"))||0);var j=f,k=e.innerHeight(),l=k;if(e.wrap("<div class='jScrollPaneContainer'></div>").parent().css({height:k+"px",width:j+"px"}),!window.navigator.userProfile){var m=parseInt(a(this).parent().css("border-left-width"))+parseInt(a(this).parent().css("border-right-width"));j-=m,a(this).css("width",j+"px").parent().css("width",j+"px")}a(document).bind("emchange",function(a,c,d){e.jScrollPaneCusel(b)})}if(b.reinitialiseOnImageLoad){var n=a.data(g,"jScrollPaneImagesToLoad")||a("img",e),o=[];n.length&&n.each(function(c,d){a(this).bind("load",function(){a.inArray(c,o)==-1&&(o.push(d),n=a.grep(n,function(a,b){return a!=d}),a.data(g,"jScrollPaneImagesToLoad",n),b.reinitialiseOnImageLoad=!1,e.jScrollPaneCusel(b))}).each(function(a,b){(this.complete||void 0===this.complete)&&(this.src=this.src)})})}var p=this.originalSidePaddingTotal,q={height:"auto",width:j-b.scrollbarWidth-b.scrollbarMargin-p+"px"};b.scrollbarOnLeft?q.paddingLeft=b.scrollbarMargin+b.scrollbarWidth+"px":q.paddingRight=b.scrollbarMargin+"px",e.css(q);var r=e.outerHeight(),s=k/r;if(s<.99){var t=e.parent();t.append(a('<div class="jScrollPaneTrack"></div>').css({width:b.scrollbarWidth+"px"}).append(a('<div class="jScrollPaneDrag"></div>').css({width:b.scrollbarWidth+"px"}).append(a('<div class="jScrollPaneDragTop"></div>').css({width:b.scrollbarWidth+"px"}),a('<div class="jScrollPaneDragBottom"></div>').css({width:b.scrollbarWidth+"px"}))));var u=a(">.jScrollPaneTrack",t),v=a(">.jScrollPaneTrack .jScrollPaneDrag",t);if(b.showArrows){var w,x,y,z,A=function(){(z>4||z%4==0)&&R(K+x*I),z++},B=function(b){a("html").unbind("mouseup",B),w.removeClass("jScrollActiveArrowButton"),clearInterval(y)},C=function(){a("html").bind("mouseup",B),w.addClass("jScrollActiveArrowButton"),z=0,A(),y=setInterval(A,100)};t.append(a("<div></div>").attr({class:"jScrollArrowUp"}).css({width:b.scrollbarWidth+"px"}).bind("mousedown",function(){return w=a(this),x=-1,C(),this.blur(),!1}).bind("click",c),a("<div></div>").attr({class:"jScrollArrowDown"}).css({width:b.scrollbarWidth+"px"}).bind("mousedown",function(){return w=a(this),x=1,C(),this.blur(),!1}).bind("click",c));var D=a(">.jScrollArrowUp",t),E=a(">.jScrollArrowDown",t);if(b.arrowSize)l=k-b.arrowSize-b.arrowSize,u.css({height:l+"px",top:b.arrowSize+"px"});else{var F=D.height();b.arrowSize=F,l=k-F-E.height(),u.css({height:l+"px",top:F+"px"})}}var G,H,I,J=a(this).css({position:"absolute",overflow:"visible"}),K=0,L=s*k/2,M=function(a,b){var c="X"==b?"Left":"Top";return a["page"+b]||a["client"+b]+(document.documentElement["scroll"+c]||document.body["scroll"+c])||0},N=function(){return!1},O=function(){ba(),G=v.offset(!1),G.top-=K,H=l-v[0].offsetHeight,I=2*b.wheelSpeed*H/r},P=function(b){return O(),L=M(b,"Y")-K-G.top,a("html").bind("mouseup",Q).bind("mousemove",S),a.browser.msie&&a("html").bind("dragstart",N).bind("selectstart",N),!1},Q=function(){a("html").unbind("mouseup",Q).unbind("mousemove",S),L=s*k/2,a.browser.msie&&a("html").unbind("dragstart",N).unbind("selectstart",N)},R=function(a){a=a<0?0:a>H?H:a,K=a,v.css({top:a+"px"});var c=a/H;J.css({top:(k-r)*c+"px"}),e.trigger("scroll"),b.showArrows&&(D[0==a?"addClass":"removeClass"]("disabled"),E[a==H?"addClass":"removeClass"]("disabled"))},S=function(a){R(M(a,"Y")-G.top-L)},T=Math.max(Math.min(s*(k-2*b.arrowSize),b.dragMaxHeight),b.dragMinHeight);v.css({height:T+"px"}).bind("mousedown",P);var U,V,W,X=function(){(V>8||V%4==0)&&R(K-(K-W)/2),V++},Y=function(){clearInterval(U),a("html").unbind("mouseup",Y).unbind("mousemove",Z)},Z=function(a){W=M(a,"Y")-G.top-L},$=function(b){O(),Z(b),V=0,a("html").bind("mouseup",Y).bind("mousemove",Z),U=setInterval(X,100),X()};u.bind("mousedown",$),t.bind("mousewheel",function(a,b){O(),ba();R(K-b*I);return!1});var _,aa,ba=function(){aa&&(clearInterval(aa),delete _)},ca=function(c,f){if("string"==typeof c){if($e=a(c,e),!$e.length)return;c=$e.offset().top-e.offset().top}t.scrollTop(0),ba();var g=-c/(k-r)*H;f||!b.animateTo?R(g):(_=g,aa=setInterval(d,b.animateInterval))};e[0].scrollTo=ca,e[0].scrollBy=function(a){var b=-parseInt(J.css("top"))||0;ca(b+a)},O(),ca(-h,!0),a("*",this).bind("focus",function(c){for(var d=a(this),f=0;d[0]!=e[0];)f+=d.position().top,d=d.offsetParent();var g=-parseInt(J.css("top"))||0,h=g+k,i=f>g&&f<h;if(!i){var j=f-b.scrollbarMargin;f>g&&(j+=a(this).height()+15+b.scrollbarMargin-k),ca(j)}}),location.hash&&ca(location.hash),a(document).bind("click",function(b){if($target=a(b.target),$target.is("a")){var c=$target.attr("href");"#"==c.substr(0,1)&&ca(c)}}),a.jScrollPaneCusel.active.push(e[0])}else e.css({height:k+"px",width:j-this.originalSidePaddingTotal+"px",padding:this.originalPadding}),e.parent().unbind("mousewheel")})},a.fn.jScrollPaneRemoveCusel=function(){a(this).each(function(){$this=a(this);var b=$this.parent();b.is(".jScrollPaneContainer")&&($this.css({top:"",height:"",width:"",padding:"",overflow:"",position:""}),$this.attr("style",$this.data("originalStyleTag")),b.after($this).remove())})},a.fn.jScrollPaneCusel.defaults={scrollbarWidth:10,scrollbarMargin:5,wheelSpeed:18,showArrows:!1,arrowSize:0,animateTo:!1,dragMinHeight:1,dragMaxHeight:99999,animateInterval:100,animateStep:3,maintainPosition:!0,scrollbarOnLeft:!1,reinitialiseOnImageLoad:!1},a(window).bind("unload",function(){for(var b=a.jScrollPaneCusel.active,c=0;c<b.length;c++)b[c].scrollTo=b[c].scrollBy=null})}(jQuery),$(function(){"use strict";$.ajax({type:"GET",url:"http://504080.com/api/v1/directories/enquiry-types",dataType:"json",success:function(a){var b,c;console.log("data.data",a.data),b=$("#tmpl").html(),c=tmpl(b,a),$(".input__select").append(c)}}),console.log("curSel"),$(".log__in").click(function(){$(".modal__window").css({display:"block"});var a={changedEl:".input__select select",scrollArrows:!1};cuSel(a),$(".select__main").change(function(){console.log("place");var a;console.log($(".select__main #idSelect").val()),a=$(".select__main #idSelect").val(),~a.indexOf("Password")?(console.log("pass find"),$(".input__select").append('<div class="input_new"><input placeholder="'+a+'" type="password" name="'+a+'" class="input__input" autocomplete="on" ></div>')):$(".input__select").append('<div class="input_new"><input placeholder="'+a+'" type="text" name="'+a+'" class="input__input" autocomplete="on" ></div>')}),$(".submit").click(function(){function a(a){var b;switch(a=b,0){case c.length:return 1;case d.length:return 1;case e.length:return 1;case f.length:return 1}}var b,c=$(".input__name").val(),d=$(".input__email").val(),e=$(".input__subject").val(),f=$(".input__description").val();if(c=$.trim(c),d=$.trim(d),e=$.trim(e),f=$.trim(f),$(".errors").html("<p></p>"),1===a(b))$(".errors").html("<p>Не заполненны обязательные поля</p>");else{if(f.length>1e3)return console.log("polya OK!"),$(".errors").html("<p>Количество знаков >1000</p>"),!1;console.log("<1000 OK!");var g=/^\w+@\w+\.\w{2,10}$/i;if(g.test(d)){var h=$("#form-id").serialize();$.ajax({type:"POST",url:"http://504080.com/api/v1/support",data:h,success:function(a){alert("данные отправлены!")},error:function(a,b){alert("Возникла ошибка: "+a.responseCode)}}),$(".input__name").val(""),$(".input__email").val(""),$(".input__subject").val(""),$(".input__description").val(""),$(".modal__window").hide(),$("div.input_new").remove()}else $(".errors").html("<p>email not correct</p>")}})})}),function(){var a={};this.tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}();